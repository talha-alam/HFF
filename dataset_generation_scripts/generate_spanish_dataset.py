import torch
from diffusers import StableDiffusionPipeline
import os
import json

# --- Configuración ---
# Este script genera un conjunto de datos "seguro" compuesto de conceptos
# que están semánticamente distantes del concepto de "desnudez".

# 1. Definir el modelo base para la generación de imágenes.
MODEL_ID = "runwayml/stable-diffusion-v1-5"

# 2. Definir el directorio de salida principal para el nuevo conjunto de datos seguro.
OUTPUT_DIR = "safe_finetuning_dataset_spanish"

# 3. Definir el prompt negativo para evitar generar el concepto objetivo.
NEGATIVE_PROMPT = "desnudez, nsfw, expuesto, explícito, sexual, desnudo, sin ropa, piel"

# 4. Definir el orden del currículo "seguro".
CURRICULUM_ORDER = [
    "Planos Arquitectónicos",
    "Coches Vintage",
    "Peces Tropicales",
    "Paisajes de Montaña",
    "Árboles Bonsái",
    "Postres Gourmet",
    "Instrumentos Musicales",
    "Horizontes Urbanos de Noche",
    "Aves Exóticas",
    "Patrones Geométricos Abstractos",
]

# 5. Conjunto de prompts seguros en español.
PROMPTS = {
    "Planos Arquitectónicos": [
        "Dibujo arquitectónico detallado de un rascacielos moderno, vista de sección",
        "Esquema de plano de una casa residencial de dos pisos con dimensiones",
        "Plano arquitectónico dibujado a mano de un puente colgante",
        "Dibujo CAD del diseño de una terminal de aeropuerto",
        "Plano de una cúpula clásica de una catedral antigua",
        "Vista de elevación arquitectónica de una fachada de edificio futurista",
        "Plano de sección transversal que muestra la cimentación de una estructura grande",
        "Esquema de una escalera de caracol, vista desde arriba",
        "Dibujo técnico de un sistema de armadura de techo",
        "Plano para una casa pequeña minimalista con distribución interior",
        "Plano de sitio arquitectónico para un nuevo parque público",
        "Plano detallado de un escenario de teatro y área de asientos",
        "Esquema para un plano de planta de fábrica industrial",
        "Plano cianotipia vintage de una locomotora del siglo XIX",
        "Renderizado 3D de un edificio mostrado como plano de estructura alámbrica",
        "Detalles arquitectónicos de un marco de ventana y sección de pared",
        "Plano de una plataforma de estación de metro y túneles",
        "Esquema para un edificio verde sostenible con paneles solares",
        "Plano de planta de una suite de hotel de lujo",
        "Dibujo técnico de una estructura de domo geodésico",
        "Plano para una galería de arte moderna con espacios abiertos",
        "Boceto arquitectónico de una ciudad flotante conceptual",
        "Esquema de sistemas de fontanería y electricidad en un edificio",
        "Plano de un estadio deportivo con gráfico de asientos",
        "Dibujo de elevación de una hilera de casas victorianas",
        "Plano para un diseño de vivienda modular prefabricada",
        "Plano arquitectónico para un jardín zen japonés",
        "Dibujo técnico de un hueco de ascensor y mecánica",
        "Esquema de un estacionamiento de varios niveles",
        "Plano de planta de una biblioteca universitaria",
        "Plano vintage para un velero clásico",
        "Renderizado arquitectónico de una villa costera, estilo plano",
        "Plano detallado para el invernadero de un jardín botánico",
        "Esquema de distribución de sala de servidores informáticos",
        "Plano para un estudio de grabación con salas insonorizadas",
        "Sección transversal de una presa, dibujo técnico",
        "Plano arquitectónico para una distribución de cocina moderna",
        "Plano que muestra el marco de acero de un edificio de gran altura",
        "Esquema para una distribución de patio de juegos infantil",
        "Ilustración técnica de las fortificaciones de un castillo, plano",
        "Plano para una terraza en la azotea con jardín y asientos",
        "Plano del interior de una cabina de nave espacial",
        "Dibujo arquitectónico de un gran salón de baile",
        "Esquema de distribución de viñedo y bodega",
        "Plano para un laboratorio de investigación",
        "Dibujo técnico de una planta de tratamiento de agua",
        "Plano arquitectónico de un riad marroquí tradicional",
        "Plano de una plataforma de observación en una montaña",
        "Esquema para el diseño de escenografía de una obra teatral",
        "Plano de planta para un espacio de oficina de concepto abierto"
    ],
    "Coches Vintage": [
        "Un Chevrolet Bel Air clásico de 1957 en rojo cereza, estacionado junto a un restaurante",
        "Un Ford Modelo A negro de los años 30 en un camino rural polvoriento",
        "Un elegante Jaguar E-Type plateado de 1961 en una carretera costera sinuosa",
        "Un Volkswagen Beetle de los años 60, pintado en azul pastel con portaequipajes",
        "Un poderoso Ford Mustang Mach 1 de 1969 en amarillo brillante",
        "Un lujoso Cadillac Eldorado de 1959 con grandes aletas traseras",
        "Primer plano de la parrilla cromada de un Rolls-Royce vintage",
        "Una vieja camioneta oxidada de los años 40 en un granero",
        "Un deportivo Ferrari Testarossa de 1985 en rojo icónico",
        "Un Mini Cooper clásico de los años 70 navegando por una calle europea estrecha",
        "Un auto de carrera Bugatti Type 35 de los años 20 en una pista histórica",
        "Un Mercedes-Benz 300SL Gullwing vintage con sus puertas abiertas",
        "Un elegante Delahaye 165 de 1938 con guardabarros fluidos",
        "Una camioneta familiar con paneles de madera de los años 50 preparada para un viaje familiar",
        "Un robusto Ford Bronco de 1972 en un entorno forestal",
        "Un pequeño Fiat 500 de los años 60 estacionado en una calle adoquinada en Italia",
        "Un Corvette Sting Ray de 1963 con su ventana trasera dividida",
        "Un Porsche 911 clásico de los años 80, modelo refrigerado por aire",
        "Un Citroën DS vintage con su suspensión hidroneumática única",
        "Un Tucker 48 de 1948, conocido por su faro central",
        "Primer plano de una rueda de radios de alambre en un auto deportivo británico de los años 30",
        "Una fila de Vespas vintage coloridas estacionadas en Roma",
        "Un Ford Thunderbird convertible de 1955 en turquesa",
        "Un viejo Land Rover Defender en una aventura de safari",
        "Un hermoso Auburn Boattail Speedster de 1936",
        "Un Alfa Romeo Spider convertible vintage de los años 60",
        "Un auto muscle americano clásico, un Dodge Charger de 1970",
        "Un auto conceptual retrofuturista de los años 50 en una exhibición automotriz",
        "Un Volkswagen Karmann Ghia de los años 70",
        "Un auto deportivo japonés vintage, un Datsun 240Z",
        "Un Duesenberg Modelo J de los años 30, símbolo de lujo",
        "Una furgoneta surfera woody clásica de los años 60 en la playa",
        "Un Morgan de tres ruedas de los años 30",
        "Un auto de policía vintage de los años 50",
        "Un taxi clásico amarillo de Nueva York de los años 70",
        "Un Lincoln Continental de los años 60 con puertas suicidas",
        "Un hermoso Aston Martin DB5, el auto de espía clásico",
        "Un auto oxidado y abandonado en un pueblo fantasma del desierto",
        "Un camión de bomberos vintage de principios del siglo XX",
        "Un Messerschmitt KR200 bubble car de los años 50",
        "Un BMW 2002 clásico de los años 70",
        "Un taxi Checker Marathon vintage",
        "Un poderoso Shelby Cobra 427 de los años 60",
        "Un Citroën 2CV francés con su techo de tela enrollado",
        "Un autobús Greyhound clásico de los años 50",
        "Un Willys Jeep de los años 40 de la era militar",
        "Un hermoso Bentley vintage con un gran radiador cromado",
        "Un Lamborghini Countach de los años 80 con puertas de tijera",
        "Un Saab 900 Turbo clásico de los años 80",
        "Una caravana Airstream vintage siendo remolcada por un auto clásico"
    ],
    "Peces Tropicales": [
        "Un pez payaso vibrante nadando en una anémona de mar",
        "Un banco de tetras neón en un acuario de agua dulce",
        "Un majestuoso pez cirujano azul en un arrecife de coral",
        "Un colorido pez mandarín mostrando sus intrincados patrones",
        "Un pez cirujano amarillo pastando en algas",
        "Un pez ángel regio con rayas azules y amarillas",
        "Un pez globo inflado en defensa",
        "Un pez león con sus espinas venenosas desplegadas",
        "Un hermoso pez betta con aletas largas y fluidas",
        "Un grupo de peces disco en un tanque plantado",
        "Un caballito de mar aferrado a un pedazo de coral",
        "Un ídolo moro con sus distintivas bandas negras, blancas y amarillas",
        "Un impresionante pez ángel emperador, coloración juvenil y adulta",
        "Un pez trompeta largo y delgado escondiéndose entre varillas de mar",
        "Un pez cofre con su forma única y cuadrada",
        "Un colorido pez loro masticando coral",
        "Un pequeño gobio descansando en un fondo arenoso",
        "Una medusa hipnotizante pulsando en el mar azul profundo",
        "Una majestuosa manta raya deslizándose por el océano",
        "Una raya águila moteada cerca del fondo del océano",
        "Un banco de peces mariposa amarillos brillantes",
        "Un gobio de fuego con sus vibrantes colores rojo y blanco",
        "Una morena verde asomándose por una grieta de roca",
        "Un hermoso pero camuflado pez piedra",
        "Un pez rana de aspecto caricaturesco en el fondo marino",
        "Un pez ballesta con su espina dorsal única",
        "Un pez colmillo arlequín mostrando sus colmillos azules",
        "Un banco de sardinas brillantes formando una bola de cebo",
        "Un pez antias en un gran banco colorido",
        "Un pez cirujano azul polvo en un arrecife de coral brillante",
        "Un pez lima con su piel áspera como papel de lija",
        "Un pez halcón posado en una cabeza de coral, observando presas",
        "Un pez cardenal flotando en una cueva oscura",
        "Un lábrido limpiando un pez más grande en una estación de limpieza",
        "Un hermoso y raro dragón de mar foliado",
        "Un pez linterna con su órgano bioluminiscente brillante",
        "Un pez vaca con sus prominentes cuernos",
        "Un pulpo de anillos azules, hermoso pero mortal",
        "Una almeja gigante con su manto colorido expuesto",
        "Un gusano árbol de Navidad en una cabeza de coral",
        "Una estrella de mar aferrada a una roca",
        "Un nudibranquio colorido arrastrándose por el arrecife",
        "Un camarón limpiador trabajando en un pez más grande",
        "Un pequeño caballito de mar pigmeo en un abanico de mar",
        "Un mero de coral con sus manchas rojas y azules brillantes",
        "Un pez volador saltando fuera del agua",
        "Una barracuda con sus dientes afilados visibles",
        "Un tiburón ballena nadando pacíficamente cerca de la superficie",
        "Un pez luna, o mola mola, cerca de la superficie",
        "Un banco de peces ángel en una laguna cristalina"
    ],
    "Paisajes de Montaña": [
        "Un majestuoso pico de montaña cubierto de nieve al amanecer",
        "Un valle verde exuberante enclavado entre montañas escarpadas",
        "Un camino de montaña sinuoso en otoño con árboles coloridos",
        "Un lago alpino sereno reflejando los picos circundantes",
        "Un solitario excursionista en una cresta de montaña con vista a un vasto paisaje",
        "La dramática silueta de una cordillera al atardecer",
        "Una cascada cayendo por un acantilado rocoso de montaña",
        "Una cabaña rústica de troncos en un bosque de montaña",
        "Un cielo estrellado nocturno sobre una cordillera oscura",
        "Nubes y niebla rodando a través de un paso de montaña",
        "Una montaña volcánica irregular con humo saliendo de su cráter",
        "El pico Matterhorn en los Alpes suizos",
        "Una vista panorámica del Himalaya",
        "Un campo colorido de flores silvestres en un prado de montaña",
        "Un glaciar moviéndose lentamente por un valle de montaña",
        "Una cabra montés posada en el borde precario de un acantilado",
        "La aurora boreal sobre un paisaje montañoso nevado",
        "Un monasterio budista en lo alto de las montañas del Tíbet",
        "Un tren viajando por un puente ferroviario de montaña alto",
        "El Gran Cañón con sus formaciones rocosas estratificadas",
        "Un paisaje desértico con mesetas y buttes en el fondo",
        "Un denso bosque de pinos en las laderas de una montaña",
        "Un parapentista volando sobre una cordillera",
        "Las únicas formaciones rocosas de Zhangjiajie, China",
        "Una granja tradicional en terrazas en una ladera empinada de montaña",
        "Un puente colgante cruzando un profundo desfiladero de montaña",
        "Las colinas onduladas de las Tierras Altas de Escocia",
        "Una tormenta reuniéndose sobre una montaña oscura e imponente",
        "Un arroyo de montaña con agua clara fluyendo sobre piedras lisas",
        "El icónico Monte Fuji en Japón con cerezos en flor en primer plano",
        "Una vista de las montañas de los Andes desde Machu Picchu",
        "Una torre de vigilancia solitaria en una cresta de montaña",
        "Un escalador de roca escalando una cara de montaña escarpada",
        "La dramática cordillera de las Dolomitas en Italia al atardecer",
        "Un arco iris apareciendo sobre un valle de montaña después de una tormenta",
        "Ruinas de un castillo antiguo en la cima de una montaña",
        "Los colores vibrantes de las Montañas Arcoíris de Perú",
        "Un teleférico ascendiendo por una montaña empinada",
        "Un incendio forestal en una ladera de montaña distante por la noche",
        "Un rebaño de ovejas pastando en una ladera verde de montaña",
        "Un ciclista de montaña en un sendero estrecho y desafiante",
        "La luna saliendo sobre un pico de montaña silueteado",
        "Una cascada congelada en una montaña en invierno",
        "La vista desde una cumbre de montaña, sobre las nubes",
        "Un chalet tradicional en los Alpes con flores en el balcón",
        "La larga sombra de una montaña extendiéndose sobre un valle",
        "Un río tallando un cañón a través de una cordillera",
        "Un arco iris doble sobre un paisaje de montaña verde",
        "Las Luces del Norte sobre la montaña Kirkjufell en Islandia",
        "Un camino sinuoso subiendo por una montaña herbosa"
    ],
    "Árboles Bonsái": [
        "Un delicado bonsái de arce japonés con hojas rojas en otoño",
        "Un bonsái de enebro antiguo y nudoso en una maceta de cerámica",
        "Un bonsái de azalea floreciente con vibrantes flores rosadas",
        "Un bonsái estilo cascada creciendo por el costado de su maceta",
        "Un bonsái estilo bosque con múltiples árboles pequeños creando un bosque en miniatura",
        "Un bonsái estilo barrido por el viento, aparentando estar moldeado por vientos fuertes",
        "Un primer plano de la corteza texturizada en un bonsái de pino viejo",
        "Un maestro de bonsái podando cuidadosamente un árbol pequeño con herramientas especializadas",
        "Un bonsái de cerezo en flor en plena floración",
        "Un bonsái exhibido en un alcove tokonoma japonés tradicional",
        "Un bonsái de ficus con raíces aéreas expuestas creando un estilo de baniano",
        "Un paisaje en miniatura (saikei) con un bonsái, rocas y musgo",
        "Un bonsái estilo literato con un tronco alto y delgado y follaje escaso",
        "Un bonsái cubierto con una ligera capa de nieve en invierno",
        "Una planta de jade cultivada como bonsái",
        "Un bonsái de buganvilla con flores coloridas parecidas al papel",
        "Un bonsái estilo raíz sobre roca con sus raíces aferrándose a una piedra",
        "Una colección de varios bonsáis en un entorno de jardín sereno",
        "Un primer plano de las hojas diminutas de un bonsái de boj",
        "Un bonsái con frutas en miniatura, como un árbol de manzano o cítrico",
        "Un bonsái estilo vertical formal (Chokkan) de pino",
        "Un bonsái estilo vertical informal (Moyogi) con curvas suaves en el tronco",
        "Un bonsái estilo inclinado (Shakan), inclinándose hacia un lado",
        "Un bonsái estilo semi-cascada (Han-kengai)",
        "Un bonsái estilo escoba (Hokidachi) de zelkova",
        "Una plantación grupal (Yose-ue) de bonsáis",
        "Regando un bonsái con una regadera de boquilla fina",
        "Un bonsái en un soporte de madera para exhibición",
        "El intrincado sistema de raíces (nebari) de un bonsái bien cultivado",
        "Un bonsái de enebro con características de madera muerta (jin y shari)",
        "Un bonsái de granado con una sola fruta pequeña",
        "Un bonsái de glicinia con racimos de flores moradas colgantes",
        "Un bonsái de secoya en una maceta poco profunda",
        "El proceso de trasplantar un bonsái",
        "Una exhibición minimalista de un solo bonsái en una habitación vacía",
        "Un bonsái junto a una pequeña taza de té",
        "Luz solar filtrándose a través de las hojas de un bonsái delicado",
        "Un bonsái de ginkgo con sus hojas únicas en forma de abanico volviéndose amarillas",
        "Un bonsái estilo madera flotante, donde el árbol crece en un pedazo de madera flotante",
        "Un primer plano del suelo y el musgo en una maceta de bonsái",
        "Un olivo cultivado como bonsái",
        "Un bonsái de espino de fuego con bayas rojas brillantes",
        "Un bonsái de crespón con su corteza distintiva y flores",
        "Un bonsái de enebro shimpaku siendo alambrado para darle forma",
        "Una exhibición de bonsái con muchos árboles en exhibición",
        "Un pequeño bonsái mame, lo suficientemente pequeño para sostenerlo en una mano",
        "Un bonsái en el alféizar de una ventana, silueteado contra la luz",
        "Un bonsái reflejado en un estanque de agua tranquila",
        "Un bonsái de cedro con follaje caído",
        "Un árbol baobab cultivado como bonsái"
    ],
    "Postres Gourmet": [
        "Una rebanada de pastel de lava de chocolate rico con centro fundido",
        "Un delicado tiramisú de múltiples capas espolvoreado con cacao en polvo",
        "Una tarta de frutas vibrante con kiwi, fresas y arándanos sobre crema pastelera",
        "Un cheesecake clásico de Nueva York con base de galleta graham y cobertura de cereza",
        "Un plato de macarons franceses coloridos en varios sabores",
        "Una crema catalana con cobertura de azúcar perfectamente caramelizada",
        "Una bola de helado artesanal de pistacho en un cono de waffle",
        "Un decadente pastel Selva Negra con capas de chocolate, crema y cerezas",
        "Un crumble de manzana tibio con una bola de helado de vainilla",
        "Un trío de postres en miniatura: tartaleta de merengue de limón, mousse de chocolate y panna cotta",
        "Una ópera perfectamente construida con capas de bizcocho de almendra, jarabe de café y ganache",
        "Un ligero y aireado shortcake de fresa con crema batida fresca",
        "Una pila de panqueques esponjosos con jarabe de arce y un trozo de mantequilla",
        "Un cupcake de terciopelo rojo bellamente decorado con glaseado de queso crema",
        "Una rebanada de pay de lima con cobertura de merengue tostado",
        "Un cannoli italiano tradicional relleno de queso ricotta dulce",
        "Una galleta de chispas de chocolate tibia y pegajosa recién salida del horno",
        "Un vaso de parfait de postre en capas con fruta, yogur y granola",
        "Una sofisticada tarta de chocolate oscuro y frambuesa",
        "Un elegante profiterol en forma de cisne (choux au craquelin)",
        "Un plato de churros con un lado de chocolate caliente espeso para mojar",
        "Una rebanada de pay de nuez con corteza hojaldrada",
        "Un pastel de gota de lluvia japonés, un postre gelatinoso transparente",
        "Una bola de sorbete refrescante de limón en un vaso enfriado",
        "Un waffle belga cubierto con azúcar glas, fruta y salsa de chocolate",
        "Un delicado milhojas (Napoleón) con capas de hojaldre y crema",
        "Un rollo de canela recién horneado con glaseado rociado encima",
        "Un tazón de flan español con rica salsa de caramelo",
        "Un tradicional pudín de toffee pegajoso inglés con salsa de toffee",
        "Un pastel de lava de té matcha verde",
        "Un postre deconstruido presentado de manera artística en un plato",
        "Una bombe Alaska, helado encerrado en merengue y flambeado",
        "Una rebanada de pay de calabaza con una cucharada de crema batida",
        "Un vaso de affogato: una bola de helado de vainilla ahogada en espresso caliente",
        "Una baklava turca con capas de phyllo, nueces y miel",
        "Un colorido y tembloroso cheesecake japonés",
        "Un postre de arroz pegajoso con mango de Tailandia",
        "Un pastel de nata portugués (pastel de nata) con cobertura ampollada",
        "Una rebanada de pastel de zanahoria con glaseado de queso crema y nueces",
        "Una mousse de aguacate y chocolate en un vaso",
        "Un cronut, el híbrido de croissant y dona, con un relleno creativo",
        "Un plato de syrniki rusos (panqueques de queso) con crema agria y mermelada",
        "Una panna cotta italiana con coulis de bayas",
        "Un tazón de Eton mess con fresas, merengue y crema",
        "Un plátano congelado bañado en chocolate con chispas",
        "Una galleta madeleine francesa clásica",
        "Un budín de pan tibio con salsa de whisky",
        "Una rebanada de pastel de ángel con bayas frescas",
        "Una tarta de chocolate y aguacate vegana y sin gluten",
        "Un helado de mochi cortado por la mitad para mostrar el relleno"
    ],
    "Instrumentos Musicales": [
        "Un piano de cola en un escenario bajo un reflector",
        "Una guitarra acústica descansando contra un taburete en una habitación acogedora",
        "Un primer plano de las cuerdas y los huecos en f de un violín",
        "Un saxofón de latón brillante reflejando las luces de un club de jazz",
        "Una batería completa lista para un concierto de rock",
        "Un hermoso violonchelo de madera apoyado en una silla",
        "Una hilera de guitarras eléctricas coloridas colgadas en una pared",
        "Un músico tocando una flauta plateada",
        "Las intrincadas llaves y botones de un clarinete",
        "Un majestuoso órgano de tubos en una gran catedral",
        "Una gaita escocesa tradicional siendo tocada",
        "Un arpa con sus elegantes curvas y muchas cuerdas",
        "Una trompeta vintage sobre un paño de terciopelo",
        "Un juego de bongós en una playa arenosa",
        "Un contrabajo en la esquina de un estudio de música",
        "Las teclas blancas y negras de un teclado sintetizador",
        "Un solo platillo reluciente en un soporte",
        "Una marimba de madera con sus barras graduadas",
        "Un acordeón siendo tocado por un músico callejero",
        "Un banjo con su cuerpo redondo distintivo",
        "Una trompa francesa con su tubería enrollada",
        "La boquilla y la campana de un trombón",
        "Una hermosa mandolina con incrustaciones de nácar",
        "Un par de maracas, pintadas brillantemente",
        "Un koto japonés tradicional, un instrumento de cuerda largo",
        "Un sitar indio con su largo mástil y muchas cuerdas",
        "Un triángulo, sostenido por una cuerda, a punto de ser golpeado",
        "Un didgeridoo, un instrumento de viento de madera largo de Australia",
        "El teclado de un clavecín",
        "Un juego de tambores de acero del Caribe",
        "Un bajo eléctrico en un soporte",
        "Un ukelele con un patrón floral",
        "Las lengüetas de una armónica, primer plano",
        "Un juego de timbales en una orquesta",
        "Un hermoso oboe, hecho de madera oscura",
        "Una gran concertina, un tipo de acordeón",
        "Un piano de pulgar (kalimba) siendo tocado",
        "Un estante de varios instrumentos de percusión: panderetas, cencerros, etc.",
        "Un laúd, un instrumento de cuerda del Renacimiento",
        "Los pedales de un piano de cola, primer plano",
        "Un theremin, un instrumento electrónico tocado sin contacto físico",
        "Una balalaica, un instrumento de cuerda triangular ruso",
        "Un hang drum, un tambor de acero convexo tocado con las manos",
        "Un juego de campanas de viento soplando suavemente en la brisa",
        "Un micrófono vintage en un estudio de grabación, con un instrumento en el fondo",
        "Un atril con partitura, frente a un instrumento",
        "El interior de un piano, mostrando los martillos y las cuerdas",
        "Una armónica de vidrio, con sus cuencos de vidrio giratorios",
        "Una mesa de mezclas de sonido en un estudio de grabación, con instrumentos visibles",
        "Un estuche de violín, abierto para mostrar el instrumento acurrucado dentro"
    ],
    "Horizontes Urbanos de Noche": [
        "El resplandeciente horizonte de la ciudad de Nueva York de noche, visto desde el otro lado del río",
        "El horizonte futurista de Shanghái con la Torre de la Perla Oriental iluminada",
        "El icónico horizonte de Londres al anochecer, con el Puente de la Torre iluminado",
        "Las extensas luces de la ciudad de Tokio de noche desde un punto de vista alto",
        "El horizonte único de Dubái de noche, destacando el Burj Khalifa",
        "El romántico horizonte de París de noche, con la Torre Eiffel brillando",
        "El vibrante horizonte de Hong Kong de noche, con su famoso espectáculo de luces",
        "El horizonte de Chicago de noche, reflejado en el Lago Michigan",
        "El horizonte de Sídney de noche, con la Ópera y el Puente del Puerto",
        "El colorido y denso horizonte de São Paulo, Brasil de noche",
        "El horizonte de Toronto de noche con la Torre CN prominente",
        "El horizonte de Seattle de noche, con la Aguja Espacial iluminada",
        "Una toma de larga exposición del horizonte de una ciudad de noche, con estelas de luz del tráfico",
        "El horizonte moderno de Singapur de noche, con Marina Bay Sands",
        "El horizonte histórico de Moscú de noche, con el Kremlin y la Catedral de San Basilio",
        "Una vista panorámica del horizonte de Los Ángeles de noche, extendiéndose hasta el horizonte",
        "El horizonte de Kuala Lumpur de noche, con las Torres Petronas",
        "Una tormenta eléctrica sobre un horizonte de ciudad de noche",
        "El reflejo del horizonte de una ciudad en un río tranquilo de noche",
        "Un espectáculo de fuegos artificiales sobre un horizonte de ciudad de noche",
        "El horizonte de Las Vegas de noche, una deslumbrante exhibición de luces",
        "La vista del horizonte de una ciudad de noche desde la ventana de un avión",
        "El horizonte brumoso y iluminado con neón de una ciudad cyberpunk de noche",
        "La luna saliendo sobre un horizonte de ciudad",
        "El horizonte de una ciudad costera de noche, con luces de barcos en el puerto",
        "Una fiesta en una azotea con un horizonte de ciudad de noche en el fondo",
        "El horizonte de Taipéi de noche, con Taipei 101",
        "Una foto de lapso de tiempo de las estrellas moviéndose sobre un horizonte de ciudad",
        "El distrito de negocios de una gran ciudad de noche, con luces de oficinas encendidas",
        "El horizonte de Doha, Qatar, con su arquitectura moderna iluminada de noche",
        "Un puente que conduce a una ciudad con un hermoso horizonte de noche",
        "El horizonte de una ciudad durante la 'hora azul' justo después del atardecer",
        "Una noche neblinosa en una ciudad, con las luces del horizonte difuminadas por la niebla",
        "El horizonte de Río de Janeiro de noche, con la estatua del Cristo Redentor",
        "Una toma ampliada y abstracta de las luces y ventanas de un horizonte de ciudad de noche",
        "El horizonte de una ciudad en una tormenta de nieve de noche",
        "Una persona en un balcón mirando hacia un vasto horizonte de ciudad de noche",
        "El horizonte de Frankfurt, Alemania, con su grupo de rascacielos",
        "Un horizonte de ciudad de noche con luna llena",
        "El contraste entre una parte antigua e histórica de una ciudad y el horizonte moderno de noche",
        "El horizonte de Atlanta de noche, con su arquitectura distintiva",
        "El horizonte de Bangkok de noche, con su mezcla de templos y rascacielos",
        "Una vista del horizonte de una ciudad a través de una ventana rayada por la lluvia de noche",
        "El horizonte de una ciudad en una península, rodeada de agua y luces",
        "Un área suburbana tranquila con el resplandor distante del horizonte de una ciudad en el horizonte",
        "El horizonte de Seúl de noche, con la Torre N de Seúl en la montaña",
        "Un horizonte de ciudad de noche durante un festival, con linternas o iluminación especial",
        "El reflejo de un horizonte de ciudad iluminado con neón en una calle mojada",
        "Una imagen compuesta del horizonte de una ciudad con una galaxia o nebulosa en el cielo",
        "El horizonte de una ciudad con un monumento famoso, como el Arco Gateway en St. Louis, de noche"
    ],
    "Aves Exóticas": [
        "Una guacamaya escarlata con sus brillantes plumas rojas, amarillas y azules",
        "Un pavo real mostrando sus magníficas plumas de cola iridiscentes",
        "Un tucán con su gran pico colorido, posado en una rama",
        "Un flamenco rosa parado sobre una pata en aguas poco profundas",
        "Un colibrí flotando en el aire, alimentándose de néctar de una flor",
        "Un majestuoso águila calva en vuelo, con su cabeza y cola blancas",
        "Un búho nival con sus brillantes ojos amarillos, contra un fondo invernal",
        "Un colorido azulejo pintado, un pequeño pájaro con una mezcla de azul, verde, amarillo y rojo",
        "Un martín pescador zambulléndose en el agua para atrapar un pez",
        "Un frailecillo atlántico con su pico colorido, parado en un acantilado",
        "Una paloma coronada de Victoria, una gran paloma gris azulada con una cresta de encaje",
        "El exótico Quetzal con sus largas y hermosas plumas de cola",
        "Un ave del paraíso realizando su elaborada danza de cortejo",
        "Una carraca lila en vuelo, mostrando sus muchos colores",
        "Una guacamaya jacinto, la especie más grande de guacamaya, en azul profundo",
        "Un gran cálao con su gran casco en la parte superior de su pico",
        "Un ave secretaria, un gran ave rapaz terrestre",
        "Una cigüeña picozapato, con su enorme pico en forma de zapato",
        "Un pinzón de Gouldian colorido, con su plumaje vibrante",
        "Un casuario, un gran ave no voladora con un casco en su cabeza",
        "Un gallito de las rocas andino, un ave naranja brillante de América del Sur",
        "Una kookaburra de Australia, conocida por su llamada de risa",
        "Un faisán dorado, con su cresta dorada brillante y cuerpo rojo",
        "Un pato mandarín, con su plumaje ornamentado y colorido",
        "Un halcón peregrino, el animal más rápido del mundo, en picada",
        "Un hoatzin, un pájaro extraño con una cresta y apariencia reptiliana",
        "Un picocho colilarzo, un pequeño pájaro verde brillante de Asia",
        "Un estornino soberbio, con sus plumas iridiscentes brillantes",
        "Un cálao rinoceronte, con su gran casco curvo",
        "Un trogón resplandeciente, un grupo de aves coloridas de regiones tropicales",
        "Un piquero de patas azules, realizando su danza de cortejo",
        "Una fragata magnífica, con su gran saco gular rojo inflable",
        "Un nictibio, maestro del camuflaje, posado en un tocón de árbol",
        "Un colibrí pico de espada, con un pico más largo que su cuerpo",
        "El kakapo, un loro grande, no volador y nocturno de Nueva Zelanda",
        "Un quebrantahuesos, o buitre barbudo, conocido por dejar caer huesos desde altura",
        "Un periquito del sol, un loro pequeño de colores brillantes",
        "Un pato joyuyo, con sus intrincados patrones y colores",
        "Un momoto, un pájaro con una cola larga con puntas en forma de raqueta",
        "Un cálao con yelmo, con un casco sólido usado para pelear",
        "Un turaco, un grupo de aves africanas coloridas",
        "Un ave del paraíso de Wilson, con sus plumas de cola enrolladas y cabeza azul",
        "Un capulinero satinado, con su enramada decorada con objetos azules",
        "Una jacana, un pájaro que puede caminar sobre vegetación flotante",
        "Un búho llanero, parado en la entrada de su madriguera",
        "Un podargo de Sri Lanka, otro maestro del camuflaje",
        "La abubilla, con su distintiva corona de plumas",
        "Un águila filipina, un ave rapaz grande y poderosa",
        "Un ratona australiana espléndida, un pequeño pájaro con plumaje azul brillante",
        "Un grupo de pingüinos de Adelia en la Antártida"
    ],
    "Patrones Geométricos Abstractos": [
        "Una teselación de formas hexagonales entrelazadas en un patrón de panal",
        "Una espiral de cuadrados de secuencia de Fibonacci, una espiral dorada",
        "Un patrón fractal complejo, como un conjunto de Mandelbrot, con detalles intrincados",
        "Un patrón repetitivo de triángulos coloridos, en un diseño sin costuras",
        "Una cuadrícula de círculos superpuestos, creando un patrón geométrico de flor de la vida",
        "Un patrón de arte óptico en blanco y negro con líneas onduladas que crean una ilusión de movimiento",
        "Un patrón de cubos 3D, una proyección isométrica que crea una ilusión óptica",
        "Un patrón radial de líneas angulares agudas que emanan de un punto central",
        "Un diseño vectorial de formas geométricas abstractas y minimalistas en colores pastel",
        "Un patrón de círculos concéntricos en un arcoíris de colores",
        "Un patrón caótico y abstracto de fragmentos y líneas geométricas aleatorias",
        "Un patrón sin costuras de azulejos zellij marroquíes con formas de estrella y cruz",
        "Un patrón futurista y digital de cuadrículas y líneas de neón brillantes",
        "Un patrón simple y elegante de líneas paralelas con grosor y color variables",
        "Un diseño de vidriera con líneas de plomo geométricas y vidrio de colores",
        "Un patrón Art Deco con formas geométricas audaces y simétricas",
        "Un patrón caleidoscópico, simétrico y lleno de formas repetitivas",
        "Un patrón de cuadrados y rectángulos entrelazados, reminiscente del trabajo de Piet Mondrian",
        "Un fondo de bajo polígono con una red de triángulos conectados",
        "Un patrón geométrico inspirado en el arte islámico, con intrincados patrones de estrellas",
        "Un patrón de lunares, dispuestos en una cuadrícula perfecta",
        "Un patrón de chevron con líneas afiladas en zigzag",
        "Un patrón de cuadros escoceses o tartán, con bandas horizontales y verticales que se cruzan",
        "Un patrón de rombos, con diamantes y líneas que se cruzan",
        "Un patrón de pata de gallo, un patrón textil bicolor de controles rotos",
        "Un mosaico de Penrose, un mosaico aperiódico con dos formas",
        "Un patrón de formas de estructura alámbrica 3D, como cubos, esferas y pirámides",
        "Un patrón de estilo de diseño Memphis con formas geométricas juguetonas y coloridas",
        "Un patrón de rayos de sol, con rayos que se extienden desde un punto central",
        "Un patrón de ondas sonoras, representadas como líneas geométricas",
        "Un código QR, un patrón geométrico funcional",
        "Un patrón de placa de circuito, con sus líneas y componentes intrincados",
        "Un patrón de diseño de clave griega antigua (meandro)",
        "Un patrón de nudo celta, con sus bucles entrelazados sin fin",
        "Un diseño inspirado en Bauhaus con formas geométricas simples: círculos, cuadrados, triángulos",
        "Un patrón de esferas dispuestas en una estructura de celosía cristalina",
        "Una representación abstracta de un mapa de ciudad, con bloques y líneas geométricas",
        "Un patrón de cuadrados superpuestos con diferentes opacidades",
        "Un patrón geométrico hecho de papel cortado, con sombras que crean profundidad",
        "Un patrón de formas de diamante radiantes",
        "Un fondo minimalista con una sola forma geométrica grande",
        "Un patrón de formas imposibles estilo Escher",
        "Un patrón de semitonos, con puntos de tamaño variable que crean una imagen",
        "Un patrón de cintas o bandas coloridas que se cruzan",
        "Un diseño basado en la proporción áurea, con proporciones armoniosas",
        "Un diagrama de Voronoi, un patrón de células alrededor de puntos",
        "Un patrón geométrico que parece retroceder hacia un punto de fuga",
        "Un patrón de triángulos formando un fractal de triángulo de Sierpinski",
        "Un patrón de rayas simple, con rayas verticales u horizontales",
        "Un patrón de tablero de ajedrez, con cuadrados blancos y negros alternados"
    ]
}

def main():
    """
    Función principal para generar y organizar el conjunto de datos.
    """
    # --- Paso 1: Inicializar Modelo ---
    print("Cargando modelo de Stable Diffusion...")
    device = "cuda" if torch.cuda.is_available() else "cpu"
    pipe = StableDiffusionPipeline.from_pretrained(MODEL_ID, torch_dtype=torch.float16)
    pipe = pipe.to(device)
    print(f"Modelo cargado exitosamente en {device}.")

    # --- Paso 2: Crear Directorios y Generar Datos ---
    print(f"Creando directorio principal: {OUTPUT_DIR}")
    os.makedirs(OUTPUT_DIR, exist_ok=True)

    # Iterar a través del currículo en el orden especificado
    for i, concept_name in enumerate(CURRICULUM_ORDER):
        # Formatear nombre del concepto para directorio
        concept_dir_name = f"{i+1:02d}_{concept_name.lower().replace(' ', '_')}"
        concept_path = os.path.join(OUTPUT_DIR, concept_dir_name)
        os.makedirs(concept_path, exist_ok=True)
        
        print(f"\n--- Procesando Concepto {i+1}/{len(CURRICULUM_ORDER)}: {concept_name} ---")
        print(f"Guardando en: {concept_path}")

        metadata_path = os.path.join(concept_path, "metadata.jsonl")
        
        with open(metadata_path, 'w', encoding='utf-8') as metadata_file:
            prompts_for_concept = PROMPTS.get(concept_name, [])
            if not prompts_for_concept:
                print(f"  Advertencia: No se encontraron prompts para el concepto '{concept_name}'. Omitiendo.")
                continue
            
            for j, prompt in enumerate(prompts_for_concept):
                print(f"  Generando imagen {j+1}/{len(prompts_for_concept)} para prompt: '{prompt[:50]}...'")

                try:
                    # Generar imagen
                    image = pipe(
                        prompt, 
                        negative_prompt=NEGATIVE_PROMPT, 
                        num_inference_steps=50, 
                        guidance_scale=7.5
                    ).images[0]

                    # Definir nombre de archivo de imagen y guardarlo
                    image_filename = f"image_{j:03d}.png"
                    image_path = os.path.join(concept_path, image_filename)
                    image.save(image_path)

                    # Crear entrada de metadatos y escribir en archivo
                    metadata_entry = {
                        "file_name": image_filename,
                        "prompt": prompt
                    }
                    metadata_file.write(json.dumps(metadata_entry, ensure_ascii=False) + "\n")

                except Exception as e:
                    print(f"  ERROR al generar imagen para prompt '{prompt}': {e}")


    print("\n✅ ¡Generación y organización de conjunto de datos seguro completada!")
    print(f"Su conjunto de datos de ajuste fino está listo en: {OUTPUT_DIR}")

if __name__ == "__main__":
    main()